import{a as F}from"./chunk-4Z3G6UYD.js";import{c as M,d as P,g as S}from"./chunk-BRHEW7GJ.js";import{b as y,c as x,d as O,e as E,h as w,j as I,k as L,r as k,t as z}from"./chunk-PM2VUJQT.js";import"./chunk-2LUDLJ2U.js";import{$a as v,Ga as c,La as _,Pa as d,Pb as C,Sb as b,Wa as l,Xa as t,Ya as n,Za as u,ab as g,gb as f,ib as s,kb as h,wa as a}from"./chunk-OOT27GPI.js";function N(e,r){e&1&&(t(0,"span"),s(1,"Le nom d'utilisateur est requis"),n())}function T(e,r){if(e&1&&(t(0,"div",14),d(1,N,2,0,"span",11),n()),e&2){let p=g();a(),l("ngIf",p.f.username.errors.required)}}function j(e,r){e&1&&(t(0,"span"),s(1,"Le mot de passe est requis"),n())}function q(e,r){if(e&1&&(t(0,"div",14),d(1,j,2,0,"span",11),n()),e&2){let p=g();a(),l("ngIf",p.f.password.errors.required)}}function D(e,r){if(e&1&&(t(0,"div",14),s(1),n()),e&2){let p=g();a(),h(" ",p.errorMessage," ")}}function B(e,r){e&1&&(t(0,"span"),s(1,"Se connecter"),n())}function G(e,r){e&1&&(t(0,"span"),s(1,"Connexion en cours..."),n())}var W=(()=>{let r=class r{constructor(i,m,o){this.formBuilder=i,this.authService=m,this.router=o,this.submitted=!1,this.loading=!1,this.errorMessage="",this.authService.isAuthenticated&&this.router.navigate(["/"]),this.loginForm=this.formBuilder.group({username:["",x.required],password:["",x.required]})}get f(){return this.loginForm.controls}onSubmit(){this.submitted=!0,this.errorMessage="",!this.loginForm.invalid&&(this.loading=!0,this.authService.login(this.loginForm.value).subscribe({next:i=>{console.log("Login successful:",i),this.router.navigate(["/"])},error:i=>{if(console.error("Login error:",i),console.log("Error details:",JSON.stringify(i,null,2)),i.error?.validationErrors){let m=Object.values(i.error.validationErrors).join(", ");this.errorMessage=m}else i.error?.message?this.errorMessage=i.error.message:i.status===401||i.status===403?this.errorMessage="Nom d'utilisateur ou mot de passe incorrect":this.errorMessage="Une erreur est survenue lors de la connexion";this.loading=!1}}))}};r.\u0275fac=function(m){return new(m||r)(c(k),c(F),c(M))},r.\u0275cmp=_({type:r,selectors:[["app-login"]],decls:28,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["id","username","type","text","formControlName","username","placeholder","Entrez votre nom d'utilisateur",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password","placeholder","Entrez votre mot de passe",1,"form-control"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],[1,"register-link"],["routerLink","/register"],[1,"error-message"]],template:function(m,o){m&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),s(4,"\u{1F34E} Makla"),n(),t(5,"h2"),s(6,"Connexion"),n(),t(7,"p"),s(8,"Bienvenue ! Connectez-vous \xE0 votre compte"),n()(),t(9,"form",3),v("ngSubmit",function(){return o.onSubmit()}),t(10,"div",4)(11,"label",5),s(12,"Nom d'utilisateur"),n(),u(13,"input",6),d(14,T,2,1,"div",7),n(),t(15,"div",4)(16,"label",8),s(17,"Mot de passe"),n(),u(18,"input",9),d(19,q,2,1,"div",7),n(),d(20,D,2,1,"div",7),t(21,"button",10),d(22,B,2,0,"span",11)(23,G,2,0,"span",11),n(),t(24,"div",12),s(25," Pas encore de compte ? "),t(26,"a",13),s(27,"S'inscrire"),n()()()()()),m&2&&(a(9),l("formGroup",o.loginForm),a(4),f("error",o.submitted&&o.f.username.errors),a(),l("ngIf",o.submitted&&o.f.username.errors),a(4),f("error",o.submitted&&o.f.password.errors),a(),l("ngIf",o.submitted&&o.f.password.errors),a(),l("ngIf",o.errorMessage),a(),l("disabled",o.loading),a(),l("ngIf",!o.loading),a(),l("ngIf",o.loading))},dependencies:[b,C,z,w,y,O,E,I,L,S,P],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:20px;box-shadow:0 20px 60px #0000004d;width:100%;max-width:450px;animation:_ngcontent-%COMP%_slideUp .5s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:10px;color:#667eea}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:10px;font-size:1.8rem}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600;font-size:.95rem}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:10px;font-size:1rem;transition:all .3s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control.error[_ngcontent-%COMP%]{border-color:#e74c3c}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:5px}.btn-primary[_ngcontent-%COMP%]{padding:14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s;margin-top:10px}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{text-align:center;color:#7f8c8d;font-size:.95rem}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;margin-left:5px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let e=r;return e})();export{W as LoginComponent};
