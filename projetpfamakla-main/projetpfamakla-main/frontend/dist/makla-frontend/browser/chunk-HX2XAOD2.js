import{a as z}from"./chunk-4Z3G6UYD.js";import{c as P,d as y,g as S}from"./chunk-BRHEW7GJ.js";import{b as w,c,d as O,e as N,h as R,j as I,k as T,r as q,t as F}from"./chunk-PM2VUJQT.js";import"./chunk-2LUDLJ2U.js";import{$a as h,Ga as v,La as C,Pa as l,Pb as E,Sb as M,Wa as s,Xa as i,Ya as r,Za as g,ab as f,c as x,gb as _,ib as a,kb as b,wa as n}from"./chunk-OOT27GPI.js";function L(e,o){e&1&&(i(0,"span"),a(1,"Le pr\xE9nom est requis"),r())}function j(e,o){if(e&1&&(i(0,"div",23),l(1,L,2,0,"span",20),r()),e&2){let m=f();n(),s("ngIf",m.f.firstName.errors.required)}}function D(e,o){e&1&&(i(0,"span"),a(1,"Le nom est requis"),r())}function V(e,o){if(e&1&&(i(0,"div",23),l(1,D,2,0,"span",20),r()),e&2){let m=f();n(),s("ngIf",m.f.lastName.errors.required)}}function G(e,o){e&1&&(i(0,"span"),a(1,"Le nom d'utilisateur est requis"),r())}function A(e,o){e&1&&(i(0,"span"),a(1,"Minimum 3 caract\xE8res"),r())}function B(e,o){if(e&1&&(i(0,"div",23),l(1,G,2,0,"span",20)(2,A,2,0,"span",20),r()),e&2){let m=f();n(),s("ngIf",m.f.username.errors.required),n(),s("ngIf",m.f.username.errors.minlength)}}function U(e,o){e&1&&(i(0,"span"),a(1,"L'email est requis"),r())}function Y(e,o){e&1&&(i(0,"span"),a(1,"Email invalide"),r())}function J(e,o){if(e&1&&(i(0,"div",23),l(1,U,2,0,"span",20)(2,Y,2,0,"span",20),r()),e&2){let m=f();n(),s("ngIf",m.f.email.errors.required),n(),s("ngIf",m.f.email.errors.email)}}function H(e,o){e&1&&(i(0,"span"),a(1,"Le mot de passe est requis"),r())}function K(e,o){e&1&&(i(0,"span"),a(1,"Minimum 6 caract\xE8res"),r())}function Q(e,o){if(e&1&&(i(0,"div",23),l(1,H,2,0,"span",20)(2,K,2,0,"span",20),r()),e&2){let m=f();n(),s("ngIf",m.f.password.errors.required),n(),s("ngIf",m.f.password.errors.minlength)}}function W(e,o){e&1&&(i(0,"span"),a(1,"Confirmez le mot de passe"),r())}function X(e,o){if(e&1&&(i(0,"div",23),l(1,W,2,0,"span",20),r()),e&2){let m=f();n(),s("ngIf",m.f.confirmPassword.errors.required)}}function Z(e,o){e&1&&(i(0,"div",23),a(1," Les mots de passe ne correspondent pas "),r())}function $(e,o){if(e&1&&(i(0,"div",23),a(1),r()),e&2){let m=f();n(),b(" ",m.errorMessage," ")}}function ee(e,o){e&1&&(i(0,"span"),a(1,"Cr\xE9er mon compte"),r())}function te(e,o){e&1&&(i(0,"span"),a(1,"Cr\xE9ation en cours..."),r())}var de=(()=>{let o=class o{constructor(u,p,t){this.formBuilder=u,this.authService=p,this.router=t,this.submitted=!1,this.loading=!1,this.errorMessage="",this.authService.isAuthenticated&&this.router.navigate(["/"]),this.registerForm=this.formBuilder.group({firstName:["",c.required],lastName:["",c.required],username:["",[c.required,c.minLength(3)]],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",c.required]},{validators:this.passwordMatchValidator})}get f(){return this.registerForm.controls}passwordMatchValidator(u){let p=u.get("password")?.value,t=u.get("confirmPassword")?.value;return p===t?null:{passwordMismatch:!0}}onSubmit(){if(this.submitted=!0,this.errorMessage="",this.registerForm.invalid)return;this.loading=!0;let t=this.registerForm.value,{confirmPassword:u}=t,p=x(t,["confirmPassword"]);this.authService.register(p).subscribe({next:d=>{console.log("Registration successful:",d),this.router.navigate(["/"])},error:d=>{if(console.error("Registration error:",d),console.log("Error details:",JSON.stringify(d,null,2)),d.error?.validationErrors){let k=Object.values(d.error.validationErrors).join(", ");this.errorMessage=k}else d.error?.message?this.errorMessage=d.error.message:d.message?this.errorMessage=d.message:this.errorMessage="Une erreur est survenue lors de l'inscription";this.loading=!1}})}};o.\u0275fac=function(p){return new(p||o)(v(q),v(z),v(P))},o.\u0275cmp=C({type:o,selectors:[["app-register"]],decls:50,vars:24,consts:[[1,"register-container"],[1,"register-card"],[1,"register-header"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","firstName"],["id","firstName","type","text","formControlName","firstName","placeholder","Pr\xE9nom",1,"form-control"],["class","error-message",4,"ngIf"],["for","lastName"],["id","lastName","type","text","formControlName","lastName","placeholder","Nom",1,"form-control"],["for","username"],["id","username","type","text","formControlName","username","placeholder","Choisissez un nom d'utilisateur",1,"form-control"],["for","email"],["id","email","type","email","formControlName","email","placeholder","votre.email@exemple.com",1,"form-control"],["for","password"],["id","password","type","password","formControlName","password","placeholder","Minimum 6 caract\xE8res",1,"form-control"],["for","confirmPassword"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Confirmez votre mot de passe",1,"form-control"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],[1,"login-link"],["routerLink","/login"],[1,"error-message"]],template:function(p,t){p&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"\u{1F34E} Makla"),r(),i(5,"h2"),a(6,"Cr\xE9er un compte"),r(),i(7,"p"),a(8,"Rejoignez-nous pour suivre votre nutrition"),r()(),i(9,"form",3),h("ngSubmit",function(){return t.onSubmit()}),i(10,"div",4)(11,"div",5)(12,"label",6),a(13,"Pr\xE9nom"),r(),g(14,"input",7),l(15,j,2,1,"div",8),r(),i(16,"div",5)(17,"label",9),a(18,"Nom"),r(),g(19,"input",10),l(20,V,2,1,"div",8),r()(),i(21,"div",5)(22,"label",11),a(23,"Nom d'utilisateur"),r(),g(24,"input",12),l(25,B,3,2,"div",8),r(),i(26,"div",5)(27,"label",13),a(28,"Email"),r(),g(29,"input",14),l(30,J,3,2,"div",8),r(),i(31,"div",5)(32,"label",15),a(33,"Mot de passe"),r(),g(34,"input",16),l(35,Q,3,2,"div",8),r(),i(36,"div",5)(37,"label",17),a(38,"Confirmer le mot de passe"),r(),g(39,"input",18),l(40,X,2,1,"div",8)(41,Z,2,0,"div",8),r(),l(42,$,2,1,"div",8),i(43,"button",19),l(44,ee,2,0,"span",20)(45,te,2,0,"span",20),r(),i(46,"div",21),a(47," D\xE9j\xE0 un compte ? "),i(48,"a",22),a(49,"Se connecter"),r()()()()()),p&2&&(n(9),s("formGroup",t.registerForm),n(5),_("error",t.submitted&&t.f.firstName.errors),n(),s("ngIf",t.submitted&&t.f.firstName.errors),n(4),_("error",t.submitted&&t.f.lastName.errors),n(),s("ngIf",t.submitted&&t.f.lastName.errors),n(4),_("error",t.submitted&&t.f.username.errors),n(),s("ngIf",t.submitted&&t.f.username.errors),n(4),_("error",t.submitted&&t.f.email.errors),n(),s("ngIf",t.submitted&&t.f.email.errors),n(4),_("error",t.submitted&&t.f.password.errors),n(),s("ngIf",t.submitted&&t.f.password.errors),n(4),_("error",t.submitted&&t.f.confirmPassword.errors),n(),s("ngIf",t.submitted&&t.f.confirmPassword.errors),n(),s("ngIf",t.submitted&&(t.registerForm.errors==null?null:t.registerForm.errors.passwordMismatch)),n(),s("ngIf",t.errorMessage),n(),s("disabled",t.loading),n(),s("ngIf",!t.loading),n(),s("ngIf",t.loading))},dependencies:[M,E,F,R,w,O,N,I,T,S,y],styles:[".register-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.register-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:20px;box-shadow:0 20px 60px #0000004d;width:100%;max-width:600px;animation:_ngcontent-%COMP%_slideUp .5s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.register-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.register-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:10px;color:#667eea}.register-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:10px;font-size:1.8rem}.register-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1rem}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600;font-size:.95rem}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:10px;font-size:1rem;transition:all .3s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control.error[_ngcontent-%COMP%]{border-color:#e74c3c}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:5px}.btn-primary[_ngcontent-%COMP%]{padding:14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s;margin-top:10px}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.login-link[_ngcontent-%COMP%]{text-align:center;color:#7f8c8d;font-size:.95rem}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;margin-left:5px}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let e=o;return e})();export{de as RegisterComponent};
